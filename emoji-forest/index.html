<!DOCTYPE html>
<html>
  <head>
    <title>forresto/emoji-forest</title>
    <meta charset="UTF-8" />
    <!-- prettier-ignore -->
    <script id="fxhash-snippet">
  //---- do not edit the following code (you can indent as you wish)
  let alphabet = "123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"
  var fxhash = new URLSearchParams(document.location.search).get("fxhash") || "oo" + Array(49).fill(0).map(_=>alphabet[(Math.random()*alphabet.length)|0]).join('')
  let b58dec = (str) => str.split('').reduce((p,c,i) => p + alphabet.indexOf(c) * (Math.pow(alphabet.length, str.length-i-1)), 0)
  let fxhashTrunc = fxhash.slice(2)
  let regex = new RegExp(".{" + ((fxhashTrunc.length/4)|0) + "}", 'g')
  let hashes = fxhashTrunc.match(regex).map(h => b58dec(h))
  let sfc32 = (a, b, c, d) => {
    return () => {
      a |= 0; b |= 0; c |= 0; d |= 0
      var t = (a + b | 0) + d | 0
      d = d + 1 | 0
      a = b ^ b >>> 9
      b = c + (c << 3) | 0
      c = c << 21 | c >>> 11
      c = c + t | 0
      return (t >>> 0) / 4294967296
    }
  }
  var fxrand = sfc32(...hashes)
  //---- /do not edit the following code
    </script>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      body {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      canvas {
        position: absolute;
        top: 0;
        left: 0;
        max-width: 100%;
        max-height: 100%;
      }
      #debug {
        position: absolute;
        top: 0;
        right: 0;
        background-color: rgba(255, 255, 255, 0.5);
      }
    </style>
    <link
      href="./forresto-com-penrosefavicon.png"
      rel="shortcut icon"
      type="image/x-icon"
    />
  </head>
  <body>
    <canvas id="bg"></canvas>
    <canvas id="canvas"></canvas>
    <pre id="debug"></pre>
    <!-- prettier-ignore -->
    <script type="module">
      /* 
        Copyright ©2021, Forrest Oliphant
        Non-commercial license: for educational and personal use only.
        If you use this code in a commercial project or NFT, please send/split @forresto 7% royalties:
        * Tezos: tz1a8U75BzpwevEveL3yGY8QrdRr7KVVLcXU
        * Paypal: https://www.paypal.me/forresto
      */
      window.EMOJI = {
        person: [
          "👩‍👩‍👧‍👧","👩‍👩‍👧‍👦","👩‍👩‍👦‍👦","👨‍👩‍👧‍👧","👨‍👩‍👧‍👦","👨‍👩‍👦‍👦","👨‍👨‍👧‍👧","👨‍👨‍👧‍👦","👨‍👨‍👦‍👦","👩‍👩‍👧","👩‍👩‍👦","👩‍👧‍👧","👩‍👧‍👦","👩‍👦‍👦","👨‍👩‍👧","👨‍👨‍👧","👨‍👨‍👦","👨‍👧‍👧","👨‍👧‍👦","👨‍👦‍👦","👩‍👧","👩‍👦","👨‍👧","👨‍👦","💁🏿‍♂","💁🏾‍♂","💁🏽‍♂","💁🏼‍♂","💁🏻‍♂","💁‍♂","💁🏿","💁🏾","💁🏽","💁🏼","💁🏻","💁","🙋🏿‍♂","🙋🏾‍♂","🙋🏽‍♂","🙋🏼‍♂","🙋🏻‍♂","🙋‍♂","🙋🏿","🙋🏾","🙋🏽","🙋🏼","🙋🏻","🙋","🙅🏿‍♂","🙅🏾‍♂","🙅🏽‍♂","🙅🏼‍♂","🙅🏻‍♂","🙅‍♂","🙅🏿","🙅🏾","🙅🏽","🙅🏼","🙅🏻","🙆🏿‍♂","🙆🏾‍♂","🙆🏽‍♂","🙆🏼‍♂","🙆🏻‍♂","🙆‍♂","🙆🏿","🙆🏾","🙆🏽","🙆🏼","🙆🏻","🙆","🙅","🚶🏿‍♀","🚶🏾‍♀","🚶🏽‍♀","🚶🏼‍♀","🚶🏻‍♀","🚶‍♀","🚶🏿","🚶🏾","🚶🏽","🚶🏼","🚶🏻","🚶","🙇🏿‍♀","🙇🏾‍♀","🙇🏽‍♀","🙇🏼‍♀","🙇🏻‍♀","🙇‍♀","🙇🏿","🙇🏾","🙇🏽","🙇🏼","🙇🏻","🙇","👯‍♂","👯","👫","👭","💆🏿‍♂","💆🏾‍♂","💆🏽‍♂","💆🏼‍♂","💆🏻‍♂","💆‍♂","💆🏿","💆🏾","💆🏽","💆🏼","💆🏻","💆","👸🏿","👸🏾","👸🏽","👸🏼","👸🏻","👸","🙍🏿‍♂","🙍🏾‍♂","🙍🏽‍♂","🙍🏼‍♂","🙍🏻‍♂","🙍‍♂","🙍🏿","🙍🏾","🙍🏽","🙍🏼","🙍🏻","🙍","💏","👩‍❤️‍💋‍👩","👨‍❤️‍💋‍👨","💑","👩‍❤️‍👩","👨‍❤️‍👨","👧🏿","👧🏾","👧🏽","👧🏼","👧🏻","👧","👨🏿","👨🏾","👨🏽","👨🏼","👨🏻","👨","👩🏿","👩🏾","👩🏽","👩🏼","👩🏻","👩","💇🏿‍♂","💇🏾‍♂","💇🏽‍♂","💇🏼‍♂","💇🏻‍♂","💇‍♂","💇🏿","💇🏾","💇🏽","💇🏼","💇🏻","💇","💂🏿‍♀","💂🏾‍♀","💂🏽‍♀","💂🏼‍♀","💂🏻‍♀","💂‍♀","💂🏿","💂🏾","💂🏽","💂🏼","💂🏻","💂","👦🏿","👦🏾","👦🏽","👦🏼","👦🏻","👦","🙎🏿‍♂","🙎🏾‍♂","🙎🏽‍♂","🙎🏼‍♂","🙎🏻‍♂","🙎‍♂","🙎🏿","🙎🏾","🙎🏽","🙎🏼","🙎🏻","🙎","👵🏿","👵🏾","👵🏽","👵🏼","👵🏻","👵","👪","👳🏿‍♀","👳🏾‍♀","👳🏽‍♀","👳🏼‍♀","👳🏻‍♀","👳‍♀","👳🏿","👳🏾","👳🏽","👳🏼","👳🏻","👳","👬","👱🏿‍♀","👱🏾‍♀","👱🏽‍♀","👱🏼‍♀","👱🏻‍♀","👱‍♀","👱🏿","👱🏾","👱🏽","👱🏼","👱🏻","👱","👰🏿","👰🏾","👰🏽","👰🏼","👰🏻","👰","👴🏿","👴🏾","👴🏽","👴🏼","👴🏻","👴","👲🏿","👲🏾","👲🏽","👲🏼","👲🏻","👲","👮🏿‍♀","👮🏾‍♀","👮🏽‍♀","👮🏼‍♀","👮🏻‍♀","👮‍♀","👮🏿","👮🏾","👮🏽","👮🏼","👮🏻","👮","👨‍🌾","👨‍🍳","👨‍🎓","👨‍🎤","👨‍🎨","👨‍🏫","👨‍🏭","👨‍💻","👨‍💼","👨‍🔧","👨‍🔬","👨‍🚀","👨‍🚒","👩‍🌾","👩‍🍳","👩‍🎓","👩‍🎤","👩‍🎨","👩‍🏫","👩‍🏭","👩‍💻","👩‍💼","👩‍🔧","👩‍🔬","👩‍🚀","👩‍🚒","👁️‍🗨️","👨‍👩‍👦","👨‍⚕️","👨‍⚖️","👨‍✈️","👩‍⚕️","👩‍⚖️","👩‍✈️","👩‍❤️‍👨","👩‍❤️‍💋‍👨","👷🏿‍♀","👷🏾‍♀","👷🏽‍♀","👷🏼‍♀","👷🏻‍♀","👷‍♀","👷🏿","👷🏾","👷🏽","👷🏼","👷🏻","👷","🛀🏿","🛀🏾","🛀🏽","🛀🏼","🛀🏻","🛀","🕵🏿‍♀","🕵🏾‍♀","🕵🏽‍♀","🕵🏼‍♀","🕵🏻‍♀","🕵‍♀","🕵🏿","🕵🏾","🕵🏽","🕵🏼","🕵🏻","🕵","🤰","🤴","🤵","🤶","🤷","🤦‍♀️","🤦‍♂️","🤷‍♀️","🤷‍♂️","🕺",
        ],
        workout: [
          "🏃🏿‍♀","🏃🏾‍♀","🏃🏽‍♀","🏃🏼‍♀","🏃🏻‍♀","🏃‍♀","🏃🏿","🏃🏾","🏃🏽","🏃🏼","🏃🏻","🏃","🏄🏿‍♀","🏄🏾‍♀","🏄🏽‍♀","🏄🏼‍♀","🏄🏻‍♀","🏄‍♀","🏄🏿","🏄🏾","🏄🏽","🏄🏼","🏄🏻","🏄","🏊🏿‍♀","🏊🏾‍♀","🏊🏽‍♀","🏊🏼‍♀","🏊🏻‍♀","🏊‍♀","🏊🏿","🏊🏾","🏊🏽","🏊🏼","🏊🏻","🏊","⛷","⛹🏿‍♀","⛹🏾‍♀","⛹🏽‍♀","⛹🏼‍♀","⛹🏻‍♀","⛹‍♀","⛹🏿","⛹🏾","⛹🏽","⛹🏼","⛹🏻","⛹","⛹️‍♀️","⛹️‍♂️","💃🏿","💃🏾","💃🏽","💃🏼","💃🏻","💃","🏂","🏋🏿‍♀","🏋🏾‍♀","🏋🏽‍♀","🏋🏼‍♀","🏋🏻‍♀","🏋‍♀","🏋🏿","🏋🏾","🏋🏽","🏋🏼","🏋🏻","🏋","🏌","🏌‍♀","🏃‍♀️","🏃‍♂️","🏄‍♀️","🏄‍♂️","🏊‍♀️","🏊‍♂️","🏋️‍♀️","🏋️‍♂️","🏌️‍♀️","🏌️‍♂️","🚴🏿‍♀","🚴🏾‍♀","🚴🏽‍♀","🚴🏼‍♀","🚴🏻‍♀","🚴‍♀","🚴🏿","🚴🏾","🚴🏽","🚴🏼","🚴🏻","🚴","🚣🏿‍♀","🚣🏾‍♀","🚣🏽‍♀","🚣🏼‍♀","🚣🏻‍♀","🚣‍♀","🚣🏿","🚣🏾","🚣🏽","🚣🏼","🚣🏻","🚣","🤸","🤹","🤺","🤼","🤽","🤾","🤸‍♀️","🤸‍♂️","🤹‍♀️","🤹‍♂️","🤼‍♀️","🤼‍♂️","🤽‍♀️","🤽‍♂️","🤾‍♀️","🤾‍♂️","🚵🏿‍♀","🚵🏾‍♀","🚵🏽‍♀","🚵🏼‍♀","🚵🏻‍♀","🚵‍♀","🚵🏿","🚵🏾","🚵🏽","🚵🏼","🚵🏻","🚵",
        ],
        hand: [
          "👌🏿","👌🏾","👌🏽","👌🏼","👌🏻","👌","👍🏿","👍🏾","👍🏽","👍🏼","👍🏻","👍","🙏🏿","🙏🏾","🙏🏽","🙏🏼","🙏🏻","🙏","🙌🏾","🙌🏽","🙌🏼","🙌🏻","🙌","✌🏿","✌🏾","✌🏽","✌🏼","✌🏻","✌️","👏🏿","👏🏾","👏🏽","👏🏼","👏🏻","👏","✋🏿","✋🏾","✋🏽","✋🏼","✋🏻","✋","👉🏿","👉🏾","👉🏽","👉🏼","👉🏻","👉","👊🏿","👊🏾","👊🏽","👊🏼","👊🏻","👊", "👈🏿","👈🏾","👈🏽","👈🏼","👈🏻","👈","👋🏿","👋🏾","👋🏽","👋🏼","👋🏻","👋","👎🏿","👎🏾","👎🏽","👎🏼","👎🏻","👎","✊🏿","✊🏾","✊🏽","✊🏼","✊🏻","✊","👇🏿","👇🏾","👇🏽","👇🏼","👇🏻","👇","👐🏿","👐🏾","👐🏽","👐🏼","👐🏻","👐","☝🏿","☝🏾","☝🏽","☝🏼","☝🏻","☝️","👆🏿","👆🏾","👆🏽","👆🏼","👆🏻","👆","🤙","🤚","🤛","🤜","🤝","🤞","✍🏿","✍🏾","✍🏽","✍🏼","✍🏻","✍️","🤘🏿","🤘🏾","🤘🏽","🤘🏼","🤘🏻","🤘","🖖🏿","🖖🏾","🖖🏽","🖖🏼","🖖🏻","🖖","🖕🏿","🖕🏾","🖕🏽","🖕🏼","🖕🏻","🖕","🖐🏿","🖐🏾","🖐🏽","🖐🏼","🖐🏻","🖐",
        ],
        face: [
          "😂","🤣","😍","😭","😊","😒","😘","☺️","😩","😔","😏","😁","😉","😌","😳","😢","😎","😅","😴","😄","😑","😕","😜","😞","😋","😐","😪","😱","😡","😃","😫","😝","😤","😆","😓","😀","😷","😣","😚","😛","😥","😇","😖","😠","😬","😶","😰","😟","😨","😙","😧","😵","😮","😯","😲","😦","😗","🤗","🤕","🤔","🤓","🤒","🤐","🙄","🙃","🙂","🙁","🤠","🤡","🤢","🤤","🤥","🤦","🤧",

          "😻","😹","😽","😼","🙀","😸","😿","😺","😾",
        ],
        baby: [
          "👼🏿","👼🏾","👼🏽","👼🏼","👼🏻","👼","👶🏿","👶🏾","👶🏽","👶🏼","👶🏻","👶",
        ],
        heart: [
          "❤️","♥️","💕","💜","💔","💖","💙","💘","💗","💞","💛","💚","💓","💟","💝","💌","🖤","🫀"
        ],
        symbol: [
          "📲","🎭","♻","💯","⬅️","✅","🔴","©️","💥","💭","💩","💤","🔞","☀️","✔️","➡","🎵","✈️","☑️","‼️","✖️","🔥","♨️","☎️","💋","🆗","🌀","💢","💬","🔝","⚠️","🔸","🐾","👣","⭕","⏩","▶️","◀️","↪️","↩️","™️","⬇️","🚫","🚮","▪️","®️","🅰️","⁉️","🈹","🚼","🆕","🆓","❓","🔙","🆘","🛅","🆒","↔️","🔵","⚫","⚪","🛃","🔃","📍","#️⃣","*️⃣","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","ℹ️","↔","↕","↕️","↖","↖️","↗️","↘️","↙️","⌚","⌚️","⌛","⌛️","⌨","⌨️","⏏","⏪","⏫","⏬","⏭","⏮","⏯","⏸","⏹","⏺","Ⓜ️","⛎","⛔️","✝️","✡️","✳️","✴️","❇️","❎","❔","❕","❗️","❣️","➕","➖","➗","➡️","➰","➿","⤴️","⤵️","⬆️","⬛️","⬜️","⭐️","⭕️","〰️","〽️","㊗️","㊙️","🆙","🅱️","🅾️","🆔","🆚","🅿️","🏧","🎦","🉐","🆖","🈯️","🈳","🆎","🆑","🈺","🈚️","🈶","🈸","🈷","🈲","🈵","🉑","🈴","🈂️","🈁","🌫","🈷️","🔹","🔜","🔁","🔱","👤","🔘","🔒","🔄","📥","🔺","🔅","🔆","👥","🔻","📛","🚺","🔷","🔶","🕕","📩","🔛","📅","🔼","🔲","📴","🔳","🔚","🔯","🚹","🔟","📓","🔕","🕛","📶","📒","🕒","🕐","🔽","🔇","🕑","📧","🚾","🔂","📬","📗","📋","📵","🕓","🚭","🕔","📄","📊","🚷","📳","🕙","🕘","🕗","🔖","📑","📃","🕚","🕖","📨","📙","🚻","🔢","📔","🔏","🕜","📤","🔀","🕤","📂","📁","🕝","🕧","🕥","🔤","📪","🕟","🚯","🕞","🕢","🕠","🔠","🔣","🕣","🕡","🔡","🛂","🚱","🛄","🚳","👁‍🗨","🛐","🗯","🕎","🕉","🗣","🗨","⚜️",
        ],
        money: [
          "💰","💸","💵","💴","🤑","💳","💶","💷","💱","💹","💲","📈","📉","💎",
        ],
        object: [
          "🎈","❌","❗","⚓","🎉","🎊","💍","🔪","💣","🍴","🚨","📕","💄","📝","✂️","🔊","📚","📢","🎓","✏","📖","💡","🔐","🔑","📞","🎨","✉️","⏰","⏱","⏲","⏳","⛏","⛑","⛓","⛱","🎐","🎎","🎌","🎋","🌂","🎍","🎫","🎏","🏮","🎟","🏺","🏷","🎞","🍽","🎒","🚿","🔋","📣","🔗","📌","🖍","🖌","🖋","🖊","🖇","🥄","🔨","🔓","🔧","📐","🛢","🛡","🛠","🛎","🛍","🗳","🗡","🗞","🗝","🗜","🗓","🗒","🗑","🗄","🗃","🗂","🔎","🔍","🕦","📦","📆","📘","📮","🔔","📯","🔬","📏","📎","📇","📭","📫","🕰","🔩","🔦","🖼","🕯",
        ],
        clothing: [
          "👠","👙","👓","👟","⛸","🎩","🎽","👗","👖","👘","👡","👛","🕶","👜","👢","👕","👒","👞","👔","👚","💼","👑","🎀","👝",
        ],
        body: [
          "👀","💀","💪🏿","💪🏾","💪🏽","💪🏼","💪🏻","💪","👅","💅🏿","💅🏾","💅🏽","💅🏼","💅🏻","💅","👄","👃🏿","👃🏾","👃🏽","👃🏼","👃🏻","👃","👂🏿","👂🏾","👂🏽","👂🏼","👂🏻","👂","👁","🤳","🦾","🦿","🦶","🫀","🧠","🫁","🦵"
        ],
        music: [
          "💿","💽","🎶","🪕","🎼","🎸","🎹","🎷","🎛","🎚","🎙","🎺","🎻","🥁","📻","🔈","🔉","🪗",
        ],
        animal: [
          "🙈","🙉","🙊","🐵","🐒","🐧","🐶","🐱","🐷","🐽","🐝","🐼","🐰","🐍","🐢","🐸","🐣","🐥","🐻","🐯","🐙","🐳","🐬","🐘","🐐","🐺","🐦","🐠","🐟","🐨","🐹","🐭","🐔","🐋","🐛","🐴","🐮","🐊","🐕","🐈","🐎","🐓","🐇","🐞","🕸","🕷","🕊","🐿","🦅","🦆","🦇","🦈","🦉","🦊","🦋","🦌","🦍","🦎","🦏","🦐","🦑","🦃","🦂","🦁","🦀","🐌","🐡","🐗","🐂","🐪","🐫","🐄","🐚","🐩","🐑","🐤","🐖","🐏","🐀","🐆","🐜","🐁","🐅","🐃",
        ],
        space: [
          "✨","🌟","💫","🌞","⭐","👽","🌙","🚀","👾","🌌","📡","🛰","🔭","☄️",

          "🌚","🌛","🌝","🌜","🌑","🌒","🌓","🌔","🌕","🌘","🌗","🌖",
        ],
        plant: [
          "🌸","🌹","🍃","🍀","🌺","🌴","🌻","💐","🌿","🍂","🌷","🌵","🍁","🌼","🌱","🌳","🌲","🥀","💮","💠",
        ],
        weather: [
          "☁","❄️","🌈","⚡","💨","🌊","☔","⛄","⛅","💧","💦","⛅️","⛈","🌪","🌩","🌨","🌧","🌦","🌥","🌤","🌬","🌁","🌡",
        ],
        game: [
          "♠","♥","♦","♣","🏀","🏆","🏈","🎮","⚾️","🎯","🎾","⚽️","⛳️","🎲","🎱","🏹","🏸","🎳","🏉","🀄","🎿","🎴","🏓","🏒","🏑","🏐","🏏","🏅","🎗","🎖","🥅","🥇","🥈","🥉","🥊","🥋","🕹","🕳","👾",
        ],
        food: [
          "🍕","🍟","🍔","🌾","🎣","🍞","🍗","🍤","🍝","🍥","🍜","🍳","🍱","🍚","🍣","🍖","🍲","🍛","🍡","🍙","🍘","🍢","🌯","🌮","🌭","🍿","🥐","🥓","🥖","🥗","🥘","🥙","🥞","🧀","🥚",
        ],
        vegan: [
          "🍓","🍌","🍉","🍆","🍑","🍒","🍍","🍇","🍎","🍏","🍅","🍋","🍊","🌽","🌰","🍐","🍠","🍈","🌶","🥑","🥒","🥔","🥕","🥜","🥝",
        ],
        drink: [
          "🍻","☕","🍺","🍷","🍹","🍸","🍼","🍵","🍯","🍾","🍶","🥛","🥂","🥃","🚰",
        ],
        sweet: [
          "🎂","🍩","🍭","🍬","🍦","🍫","🍰","🍪","🍧","🍨","🍮",
        ],
        vice: [
          "💉","💊","🚬","🍄","🔫","🎰","🃏",
        ],
        flag: [
          "🏳‍🌈","🏁","🏴","🏳","🚩","🇺🇳",
          "🇺🇸","🇫🇷","🇮🇹","🇬🇧","🇩🇪","🇯🇵","🇰🇷","🇷🇺","🇨🇳","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇲","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇦🇿","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇷","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇾","🇧🇿","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇪🇦","🇪🇨","🇪🇪","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇬🇦","🇬🇩","🇬🇪","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇯🇪","🇯🇲","🇯🇴","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇼","🇰🇾","🇰🇿","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇹","🇱🇺","🇱🇻","🇱🇾","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇳","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇴🇲","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇶🇦","🇷🇪","🇷🇴","🇷🇸","🇷🇼","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇯","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇺🇦","🇺🇬","🇺🇲","🇺🇾","🇺🇿","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇼🇫","🇼🇸","🇽🇰","🇾🇪","🇾🇹","🇿🇦","🇿🇲","🇿🇼",
        ],
        supernatural: [
          "👻","🔮","😈","👿","🎃","👹","👺","🐲","🐉","🦄","📿","🕴","👽",
        ],
        decemberween: [
          "🎄","🎁","✨","❄️","☃️","⛄️","🎅🏿","🎅🏾","🎅🏽","🎅🏼","🎅🏻","🎅","🤶","🤶🏻","🤶🏼","🤶🏽","🤶🏾","🤶🏿","🧑‍🎄","🧑🏻‍🎄","🧑🏼‍🎄","🧑🏽‍🎄","🧑🏾‍🎄","🧑🏿‍🎄",
        ],
        place: [
          "⛩","⛪️","🗻","⛰","🏔",
          "💒","⛲️","⛴","⛵️","⛽️","⛺️","🏡","🏠","🌋","🏪","🏰","🏥","🏢","🏩","🏫","🏟","🏞","🏝","🏜","🏛","🏚","🏙","🏘","🏗","🏖","🏕","🏭","🏯","🏤","🏦","🏨","🏣","🏬","🗽","🗼",
          "🌐","🌍","🌎","🌏",
          "🛌","🛋","🛁","🛏","🚽","💈","🚪",
          "🎪","🎡","🎢","🎠","🗿","🛤","🛣","🗺","🕍","🕌","🕋",
          "🌅","🌃","🌆","🌉","🎑","🎆","🌠","🎇","🌄","🌇","🗾",
        ],
        transport: [
          "🏎","🏍","🚘","🚗","🚙","🏇","🚲","🛒","🛴","🛵","🛶","🚢","🚠","🚟","🛩","🛥","🚒","🚚","🚃","🚤","🚁","🚔","🚓","🚖","🚍","🚑","🛳","🚡","🚄","🚛","🚌","🚂","🚕","💺","🚋","🚎","🚅","🚐","🚊","🚉","🛫","🛬","🚞","🚜","🚇","🚆","🚝","🚈",
          "🚏","🚸","🛑","🔰","🚦","🚥","🚧",
        ],
        media: [
          "🖲","🖱","🖨","🖥","📽","📸","🔌","🤖","📻","💿","📀","💽","📱","📹","📷","🎧","🎤","🎬","🎥","📺","💻","📼","📡","🛰","📟","💾","📠","📰","📜",
        ]
      }
    </script>

    <script type="module">
      /** Random utils */

      // prettier-ignore
      function randomReset() {
        let b58dec = (str) => str.split('').reduce((p,c,i) => p + alphabet.indexOf(c) * (Math.pow(alphabet.length, str.length-i-1)), 0)
        let fxhashTrunc = fxhash.slice(2)
        let regex = new RegExp(".{" + ((fxhashTrunc.length/4)|0) + "}", 'g')
        let hashes = fxhashTrunc.match(regex).map(h => b58dec(h))
        let sfc32 = (a, b, c, d) => {
          return () => {
            a |= 0; b |= 0; c |= 0; d |= 0
            var t = (a + b | 0) + d | 0
            d = d + 1 | 0
            a = b ^ b >>> 9
            b = c + (c << 3) | 0
            c = c << 21 | c >>> 11
            c = c + t | 0
            return (t >>> 0) / 4294967296
          }
        }
        fxrand = sfc32(...hashes)
      }

      function randomBetween(min, max) {
        return min + (max - min) * fxrand();
      }

      function randomIntBetween(min, max) {
        return Math.floor(randomBetween(min, max));
      }

      /*
        Copyright ©2021, Forrest Oliphant
        Non-commercial license: for educational and personal use only.
        If you use this code in a commercial project or NFT, please send/split @forresto 7% royalties:
        * Tezos: tz1a8U75BzpwevEveL3yGY8QrdRr7KVVLcXU
        * Paypal: https://www.paypal.me/forresto
      */

      const TAU = Math.PI * 2;
      let paused = false;

      // Canvas with the pixel density, that resizes with the window size
      const canvas = document.getElementById("canvas");
      const context = canvas.getContext("2d");
      let dpr = window.devicePixelRatio || 1;
      let width;
      let height;
      let radius;
      let centerX;
      let centerY;
      let radiusSquared;

      const debug = new URLSearchParams(document.location.search).get("debug");
      const debugEl = document.getElementById("debug");
      debugEl.style.display = debug ? "block" : "none";

      const bgCanvas = document.getElementById("bg");
      const bgContext = bgCanvas.getContext("2d");
      bgCanvas.style.display = debug ? "block" : "none";

      let nextAnimationFrame;

      function init() {
        randomReset();

        if (nextAnimationFrame) {
          cancelAnimationFrame(nextAnimationFrame);
        }

        const particleCount = randomIntBetween(3, 12);

        const loopLength = 4 + Math.floor(fxrand() * 4) * 4;
        const loopLengthFrames = loopLength * 60;

        const paletteKeys = Object.keys(EMOJI);
        const paletteCount =
          fxrand() < 1 / 40
            ? 0
            : fxrand() < 1 / 20
            ? 1
            : 2 + Math.floor(fxrand() * 2);
        const paletteName =
          paletteCount === 0
            ? "wild"
            : paletteCount === 1
            ? paletteKeys[Math.floor(fxrand() * paletteKeys.length)]
            : "mix";

        const mixPaletteNames =
          paletteCount === 0
            ? paletteKeys
            : paletteCount === 1
            ? [paletteName]
            : Array(paletteCount)
                .fill("")
                .map(
                  () => paletteKeys[Math.floor(fxrand() * paletteKeys.length)]
                );

        window.$fxhashFeatures = {
          particleCount,
          paletteName,
          paletteCount,
          loopLength,
        };
        console.log(window.$fxhashFeatures, mixPaletteNames);

        debugEl.textContent = JSON.stringify(
          { fxhash, mixPaletteNames, features: window.$fxhashFeatures },
          null,
          2
        );
        function randomEmoji() {
          const group =
            paletteCount === 0
              ? EMOJI[paletteKeys[Math.floor(fxrand() * paletteKeys.length)]]
              : paletteCount === 1
              ? EMOJI[paletteName]
              : EMOJI[
                  mixPaletteNames[Math.floor(fxrand() * mixPaletteNames.length)]
                ];
          return group[Math.floor(fxrand() * group.length)];
        }

        // Particles
        const firstHeading = TAU * fxrand();
        function makeParticle(_, i) {
          const size = Math.min(64, randomBetween(0.12, 0.48) * radius);
          const ratio = i / particleCount;
          const heading =
            firstHeading +
            ratio * TAU +
            randomBetween(-ratio * 0.5, ratio * 0.5) * TAU;
          return {
            text: randomEmoji(),
            x: centerX + Math.cos(heading + Math.PI) * radius * 0.75,
            y: centerY + Math.sin(heading + Math.PI) * radius * 0.75,
            heading,
            size,
            velocity: size * 0.35,
            sibCount: randomIntBetween(3, 12),
            debugColor: `hsl(${ratio * 360}, 100%, 50%)`,
            wander: randomBetween(-0.0005, 0.0005),
            branch: randomBetween(0.005, 0.1),
            branchAngle: randomBetween(0.001, 0.2),
          };
        }
        let particles = new Array(particleCount).fill(0).map(makeParticle);

        // Animate
        let frame = 0;
        function draw() {
          if (paused) {
            nextAnimationFrame = window.requestAnimationFrame(draw);
            return;
          }
          for (let particle of particles) {
            const { text, dead, branch } = particle;

            if (dead) {
              continue;
            }

            // Max check
            if (particles.length < 256) {
              console.log(particles.length + " particles");
              // Branch with probability
              if (frame > 0 && fxrand() < branch) {
                const headingDelta = TAU * (fxrand() < 0.5 ? 0.1 : -0.1);
                const size = particle.size * randomBetween(0.55, 0.85);
                const velocity = size * 0.35;
                // Dupe and add this one
                particles.push({
                  ...particle,
                  heading: particle.heading - headingDelta,
                  size,
                  velocity,
                });
                // Shrink and curve this one
                particle.size = size;
                particle.velocity = velocity;
                particle.heading = particle.heading + headingDelta;
              }
            }

            particle.heading += TAU * randomBetween(-0.02, 0.02); //+ particle.wander * fxrand();
            // const velocity =
            //   particle.velocity +
            //   Math.sin((frame / accelerationLoopLength) * TAU) *
            //     particle.acceleration;
            particle.x += Math.cos(particle.heading) * particle.velocity;
            particle.y += Math.sin(particle.heading) * particle.velocity;
            if (
              particle.x < radius * 0.05 ||
              particle.x > width - radius * 0.05 ||
              particle.y < radius * 0.05 ||
              particle.y > height - radius * 0.05
            ) {
              particle.dead = true;
            }

            // Can this branch grow?
            if (!particle.dead) {
              const pixel = context.getImageData(
                particle.x | 0,
                particle.y | 0,
                1,
                1
              ).data;
              const bgPixel = bgContext.getImageData(
                particle.x | 0,
                particle.y | 0,
                1,
                1
              ).data;
              const bgPixelDifferent =
                bgPixel[0] + 4 < particle.debugRed ||
                bgPixel[0] - 4 > particle.debugRed;
              const bgPixelClose = !bgPixelDifferent;
              if (
                true /*bgPixel[3] === 0 || (pixel[3] === 0 && bgPixelClose) */
              ) {
                context.font = `${particle.size}px "Noto Color Emoji", "Noto Sans", sans-serif`;
                context.save();
                context.translate(particle.x, particle.y);
                context.rotate(particle.heading + TAU * 0.25);
                context.fillText(text, 0, 0);
                context.restore();

                bgContext.fillStyle = particle.debugColor;
                bgContext.beginPath();
                bgContext.arc(
                  particle.x,
                  particle.y,
                  particle.size * 0.8,
                  0,
                  TAU
                );
                bgContext.fill();

                particle.size *= 0.99;
                particle.velocity *= 0.99;

                if (particle.size < dpr * 4) {
                  particle.dead = true;
                }
              } else {
                if (bgPixelDifferent) {
                  // Hit another mother's branch
                  particle.dead = true;
                }
              }
            }
          }

          if (particles.length > 250) {
            particles = particles.filter((particle) => !particle.dead);
          }

          frame++;
          nextAnimationFrame = window.requestAnimationFrame(draw);
        }
        draw();
      }

      canvas.addEventListener("click", () => {
        context.clearRect(0, 0, canvas.width, canvas.height);
        bgContext.clearRect(0, 0, bgContext.width, bgContext.height);
        resize();
        // paused = !paused;
        // debugEl.style.display = debug || paused ? "block" : "none";
      });

      // Resize canvas with window, and restart
      function resize() {
        let dpr = window.devicePixelRatio;
        width =
          canvas.width =
          bgCanvas.width =
            Math.max(512, window.innerWidth) * dpr;
        height =
          canvas.height =
          bgCanvas.height =
            Math.max(512, window.innerHeight) * dpr;
        radius = Math.min(width, height) / 2;
        radiusSquared = radius * radius;
        centerX = width * 0.5;
        centerY = height * 0.5;
        context.textAlign = "center";
        context.textBaseline = "middle";
        context.globalCompositeOperation = "destination-over";
        init();
      }
      window.addEventListener("resize", resize);
      resize();
    </script>
  </body>
</html>
